<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      div {
        height: 200px;
        width: 500px;
        background-color: gray;
        overflow-y: scroll;
      }
    </style>
  </head>
  <body>
    <p id="messageID"></p>

    <div>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo delectus
        minus commodi? Iusto eligendi quidem nulla. Asperiores officiis ullam
        minima blanditiis deleniti aut deserunt obcaecati! Id libero at dolorem
        nemo? Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iure
        minima aspernatur a impedit quae sequi mollitia sint earum? Ex molestiae
        asperiores expedita pariatur dolores inventore ullam recusandae
        laboriosam quos eligendi! Lorem ipsum dolor sit amet consectetur
        adipisicing elit. Corrupti nesciunt ea laudantium voluptate totam illo
        excepturi iure? Odit, ratione dolor cum doloremque accusamus nulla,
        explicabo rerum, a alias ut fugit?
      </p>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo delectus
        minus commodi? Iusto eligendi quidem nulla. Asperiores officiis ullam
        minima blanditiis deleniti aut deserunt obcaecati! Id libero at dolorem
        nemo? Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iure
        minima aspernatur a impedit quae sequi mollitia sint earum? Ex molestiae
        asperiores expedita pariatur dolores inventore ullam recusandae
        laboriosam quos eligendi! Lorem ipsum dolor sit amet consectetur
        adipisicing elit. Corrupti nesciunt ea laudantium voluptate totam illo
        excepturi iure? Odit, ratione dolor cum doloremque accusamus nulla,
        explicabo rerum, a alias ut fugit?
      </p>
      <img
        width="200px"
        src="https://d3ugyf2ht6aenh.cloudfront.net/stores/814/563/products/41141837_905893922943720_9207504391848853504_n1-77f15e8dc9eba511c915418765925080-640-01-05d3455923c750e6bb16541245479576-480-0.webp"
        alt="cam"
      />
      <button onclick="onClick()">Disconect</button>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo delectus
        minus commodi? Iusto eligendi quidem nulla. Asperiores officiis ullam
        minima blanditiis deleniti aut deserunt obcaecati! Id libero at dolorem
        nemo? Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iure
        minima aspernatur a impedit quae sequi mollitia sint earum? Ex molestiae
        asperiores expedita pariatur dolores inventore ullam recusandae
        laboriosam quos eligendi! Lorem ipsum dolor sit amet consectetur
        adipisicing elit. Corrupti nesciunt ea laudantium voluptate totam illo
        excepturi iure? Odit, ratione dolor cum doloremque accusamus nulla,
        explicabo rerum, a alias ut fugit?
      </p>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo delectus
        minus commodi? Iusto eligendi quidem nulla. Asperiores officiis ullam
        minima blanditiis deleniti aut deserunt obcaecati! Id libero at dolorem
        nemo? Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iure
        minima aspernatur a impedit quae sequi mollitia sint earum? Ex molestiae
        asperiores expedita pariatur dolores inventore ullam recusandae
        laboriosam quos eligendi! Lorem ipsum dolor sit amet consectetur
        adipisicing elit. Corrupti nesciunt ea laudantium voluptate totam illo
        excepturi iure? Odit, ratione dolor cum doloremque accusamus nulla,
        explicabo rerum, a alias ut fugit?
      </p>
    </div>
    <script>
      function checkVisibility(entries) {
        const entry = entries[0];
        if (entry.isIntersecting) {
          document.getElementById("messageID").innerHTML = "Image is visible";
        } else {
          document.getElementById("messageID").innerHTML =
            "Image is not visible";
        }
      }

      function onClick() {
        observer.disconnect();
      }

      const imageElement = document.querySelector("img");

      const observer = new IntersectionObserver(checkVisibility, {});
      observer.observe(imageElement);
    </script>
  </body>
</html>
